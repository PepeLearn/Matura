CREATE DATABASE shop;
use shop;
CREATE TABLE user(
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    username VARCHAR(25) NOT NULL,
    password VARCHAR(255) NOT NULL,
    admin boolean DEFAULT 0,
    timeCreated datetime NOT NULL DEFAULT NOW(),
    phoneNumber int(9) ZEROFILL
    );
CREATE TABLE product (
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    productName VARCHAR(200) NOT NULL,
    productPrice double NOT NULL,
    productCategory VARCHAR(200) NOT NULL,
    productSuperCategory VARCHAR(200) NOT NULL,
    timeCreated datetime NOT NULL DEFAULT NOW(),
    description varchar(1000) DEFAULT "Sample description"
    );
CREATE TABLE productVariant(
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    color varchar(30),
    stock smallint(4),
    size varchar(3),  
    productID int NOT NULL,
    FOREIGN KEY (productID) REFERENCES product(id) 
);
CREATE TABLE tags (
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    tagName varchar(200) NOT NULL); 
CREATE TABLE tagtoproduct (
    productID int,
    tagID int,
    FOREIGN KEY (productID) REFERENCES product(id),
    FOREIGN KEY (tagID) REFERENCES  tags(id)
);
CREATE TABLE orders (
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    timePurchased datetime NOT NULL DEFAULT NOW(),
    productID int NOT NULL,
    address varchar(100),
    userID int,
    amount tinyint, 
    FOREIGN KEY (productID) REFERENCES product(id)
);
CREATE TABLE review(
    id int PRIMARY KEY NOT NULL AUTO_INCREMENT,
    userID int NOT NULL,
    productID int NOT NULL,
    description VARCHAR(1000),
    rating tinyint(2) NOT NULL,
    FOREIGN KEY (productID) REFERENCES product(id),
    FOREIGN KEY (productID) REFERENCES product(id)
)
INSERT user (username, password,admin) VALUES ("admin", "$2y$10$NTIrrcDWdTwujsa5f0fXJu3rrfYb9X3luLkNKPGa0LerqJcIi.i9G", true);
INSERT user (username,password) VALUES ("nejc","1234");
INSERT INTO product (productName,productPrice,productCategory,productSuperCategory,description) VALUES ("Shirt",19.99,"Shirts","Men","majca za nosit");
INSERT INTO product (productName,productPrice,productCategory,productSuperCategory,description) VALUES ("Adidas Pants",15.99,"Pants","Women","hlace za nosit");
INSERT INTO product (productName,productPrice,productCategory,productSuperCategory,description) VALUES ("Warm Coat",89.99,"Coats","Men","plasc za nosit");
INSERT INTO productVariant (color,stock,size,productID) VALUES ("yellow",1,"XL",1);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("gray",2,"L",1);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("yellow",7,"M",1);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("yellow",6,"S",1);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("blue",5,"46",2);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("blue",0,"48",2);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("blue",9,"34",2);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("gray",3,"L",3);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("gray",3,"M",3);
INSERT INTO productVariant (color,stock,size,productID) VALUES ("gray",2,"XL",3);
INSERT INTO tags (tagName) VALUES ("winter");
INSERT INTO tags (tagName) VALUES ("adidas");
INSERT INTO tags (tagName) VALUES ("shirt");
INSERT INTO tags (tagName) VALUES ("warm");
INSERT INTO tags (tagName) VALUES ("coat");
INSERT INTO tags (tagName) VALUES ("pants");
INSERT INTO tags (tagName) VALUES ("blue");
INSERT INTO tagtoproduct VALUES (1,7);
INSERT INTO tagtoproduct VALUES (1,3);
INSERT INTO tagtoproduct VALUES (2,6);
INSERT INTO tagtoproduct VALUES (2,2);
INSERT INTO tagtoproduct VALUES (3,1);
INSERT INTO tagtoproduct VALUES (3,4);
INSERT INTO tagtoproduct VALUES (3,5);

